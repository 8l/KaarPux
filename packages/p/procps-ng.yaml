package:
  name: procps-ng
  version: 3.3.11
  www: http://sourceforge.net/projects/procps-ng/
  short: |
      Command line and full screen utilities for browsing procfs,
      a "pseudo" file system dynamically generated by the kernel
      to provide information about the status of entries in its process table
      (such as whether the process is running, stopped, or a "zombie").
      It contains free, pkill, pgrep, pmap, ps, pwdx, slabtop, sysctl, tload, top, uptime, vmstat, w, and watch.

download:
  sourceforge: ~
  file_tar_xz: ~
  checksum: e9493169a2d2adc0bc045538707310c8e877b385e4e296143b62607d2bb044ed

version:
  installed_sh_trailing: ps --version
  upstream: kxver_upstream_sourceforge("procps-ng", "Production", "procps-ng");

bootstrap_8:
  - configure_kx: >
      --disable-static
      --disable-skill
      --disable-kill

  - make: ~

  - sh: sed -i -r 's|(pmap_initname)\\\$|\1|' testsuite/pmap.test/pmap.exp
  - check: ~

  - install: ~
  - sh: touch /etc/sysctl.conf

verify_cli: |
  kx_cli_match_success /bin/free { free Mem Swap }
  kx_cli_match_success "/bin/pgrep -u root" { 1 }
  kx_cli_match_success "/bin/pmap 1" { init }
  kx_cli_match_success "/bin/ps" { PID CMD }
  kx_cli_match_success "/bin/uptime" { up user "load average" }
  kx_cli_match_success "/bin/vmstat" { procs memory swap io system cpu free buff cache }
  kx_cli_match_success "/bin/w" { USER WHAT }

# TODO: Test
# /bin/pkill
# /bin/pwdx
# /bin/skill
# /bin/slabtop
# /bin/snice
# /bin/sysctl
# /bin/tload
# /bin/top
# /bin/watch

